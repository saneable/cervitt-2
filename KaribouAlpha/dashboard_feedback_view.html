<main>
    <div class="container-fluid">
        <div class="row dashboard-stats-and-updates-row">
            <div class="col-sm-6 dashboard-stats-col">
                <div class="row">
                    <div class="col-sm-3">
                        <div class="dashboard-stats-item-container">
                            <h4 class="dashboard-stats-item-heading">Profile</h4>
                            <div class="dashboard-stats-profile-completion-indicator">
                                <h4 class="dashboard-stats-profile-completion-percentage">65%</h4>
                                <h4 class="dashboard-stats-profile-completion-heading">complete</h4>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3 dashboard-stats-item-container">
                        <div class="row">
                            <div class="col-sm-12">
                                <h4 class="dashboard-stats-item-heading">Downloads</h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4 col-sm-offset-2 dashboard-stats-bar-chart-container">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <h4 class="dashboard-stats-bar-previous-value" ng-style="{marginTop: (74 - ctrl.getHeightForStatsBar(74, ctrl.companyStatistics.ProductFileDownloadsLastWeek, ctrl.companyStatistics.ProductFileDownloadsThisWeek)) + 'px'}">{{ctrl.companyStatistics.ProductFileDownloadsLastWeek}}</h4>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12 dashboard-stats-bar-left-col">
                                        <div class="dashboard-stats-bar-previous" ng-style="{height: ctrl.getHeightForStatsBar(75, ctrl.companyStatistics.ProductFileDownloadsLastWeek, ctrl.companyStatistics.ProductFileDownloadsThisWeek) + 'px'}">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 dashboard-stats-bar-chart-container">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <h4 class="dashboard-stats-bar-current-value" ng-style="{marginTop: (74 - ctrl.getHeightForStatsBar(74, ctrl.companyStatistics.ProductFileDownloadsThisWeek, ctrl.companyStatistics.ProductFileDownloadsLastWeek)) + 'px'}">{{ctrl.companyStatistics.ProductFileDownloadsThisWeek}}</h4>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12 dashboard-stats-bar-right-col">
                                        <div class="dashboard-stats-bar-current" ng-style="{height: ctrl.getHeightForStatsBar(75, ctrl.companyStatistics.ProductFileDownloadsThisWeek, ctrl.companyStatistics.ProductFileDownloadsLastWeek) + 'px'}">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3 dashboard-stats-item-container">
                        <div class="row">
                            <div class="col-sm-12">
                                <h4 class="dashboard-stats-item-heading">Feedback</h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4 col-sm-offset-2 dashboard-stats-bar-chart-container">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <h4 class="dashboard-stats-bar-previous-value" ng-style="{marginTop: (74 - ctrl.getHeightForStatsBar(74, ctrl.companyStatistics.ProductFeedbackLastWeek, ctrl.companyStatistics.ProductFeedbackThisWeek)) + 'px'}">{{ctrl.companyStatistics.ProductFeedbackLastWeek}}</h4>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12 dashboard-stats-bar-left-col">
                                        <div class="dashboard-stats-bar-previous" ng-style="{height: ctrl.getHeightForStatsBar(75, ctrl.companyStatistics.ProductFeedbackLastWeek, ctrl.companyStatistics.ProductFeedbackThisWeek) + 'px'}">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 dashboard-stats-bar-chart-container">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <h4 class="dashboard-stats-bar-current-value" ng-style="{marginTop: (74 - ctrl.getHeightForStatsBar(74, ctrl.companyStatistics.ProductFeedbackThisWeek, ctrl.companyStatistics.ProductFeedbackLastWeek)) + 'px'}">{{ctrl.companyStatistics.ProductFeedbackThisWeek}}</h4>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12 dashboard-stats-bar-right-col">
                                        <div class="dashboard-stats-bar-current" ng-style="{height: ctrl.getHeightForStatsBar(75, ctrl.companyStatistics.ProductFeedbackThisWeek, ctrl.companyStatistics.ProductFeedbackLastWeek) + 'px'}">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3 dashboard-stats-item-container">
                        <div class="row">
                            <div class="col-sm-12">
                                <h4 class="dashboard-stats-item-heading">Views</h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4 col-sm-offset-2 dashboard-stats-bar-chart-container">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <h4 class="dashboard-stats-bar-previous-value" ng-style="{marginTop: (74 - ctrl.getHeightForStatsBar(74, ctrl.companyStatistics.ProductViewsLastWeek, ctrl.companyStatistics.ProductViewsThisWeek)) + 'px'}">{{ctrl.companyStatistics.ProductViewsLastWeek}}</h4>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12 dashboard-stats-bar-left-col">
                                        <div class="dashboard-stats-bar-previous" ng-style="{height: ctrl.getHeightForStatsBar(75, ctrl.companyStatistics.ProductViewsLastWeek, ctrl.companyStatistics.ProductViewsThisWeek) + 'px'}">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 dashboard-stats-bar-chart-container">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <h4 class="dashboard-stats-bar-current-value" ng-style="{marginTop: (74 - ctrl.getHeightForStatsBar(74, ctrl.companyStatistics.ProductViewsThisWeek, ctrl.companyStatistics.ProductViewsLastWeek)) + 'px'}">{{ctrl.companyStatistics.ProductViewsThisWeek}}</h4>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12 dashboard-stats-bar-right-col">
                                        <div class="dashboard-stats-bar-current" ng-style="{height: ctrl.getHeightForStatsBar(75, ctrl.companyStatistics.ProductViewsThisWeek, ctrl.companyStatistics.ProductViewsLastWeek) + 'px'}">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-3 col-sm-offset-3">
                        <div class="dashboard-updates-item-selected-highlight-spacer">
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 dashboard-updates-col">
                <div class="row">
                    <div class="col-sm-3 dashboard-updates-item-col">
                        <div ui-sref="dashboardProductUpdates" style="cursor: pointer;" class="dashboard-updates-item-container">
                            <h4 class="dashboard-updates-item-heading">Product updates</h4>
                            <div class="dashboard-updates-counter-container">
                                <h4 class="dashboard-updates-counter">{{ctrl.notificationCounters.NewProductUpdates}}</h4>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3 dashboard-updates-item-col">
                        <div ui-sref="dashboardFeedback" style="cursor: pointer;" class="dashboard-updates-item-container">
                            <h4 class="dashboard-updates-item-heading">Feedback</h4>
                            <div class="dashboard-updates-counter-container">
                                <h4 class="dashboard-updates-counter">{{ctrl.notificationCounters.NewFeedback}}</h4>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3 dashboard-updates-item-col">
                        <div ui-sref="dashboard" style="cursor: pointer;" class="dashboard-updates-item-container">
                            <h4 class="dashboard-updates-item-heading">News updates</h4>
                            <div class="dashboard-updates-counter-container">
                                <h4 class="dashboard-updates-counter">{{ctrl.notificationCounters.NewNewsItems}}</h4>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3 dashboard-updates-item-col">
                        <div ui-sref="personalConnections" style="cursor: pointer;" class="dashboard-updates-item-container">
                            <h4 class="dashboard-updates-item-heading">Connections</h4>
                            <div class="dashboard-updates-counter-container">
                                <h4 class="dashboard-updates-counter">{{ctrl.notificationCounters.NewConnectionRequests}}</h4>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-3 col-sm-offset-3">
                        <div class="dashboard-updates-item-selected-highlight">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-10 col-sm-offset-1 dashboard-feedback-heading-col">
                <h4 class="dashboard-feedback-heading">Feedback</h4>
            </div>
        </div>
        <div clas="row">
            <div class="col-sm-6">
                <div ng-repeat="feedback in ctrl.productFileFeedback | orderBy:'-UpdatedAt'" ng-click="ctrl.selectFeedback(feedback)" class="row" style="cursor: pointer;">
                    <div class="col-sm-10 col-sm-offset-1">
                        <div ng-class="feedback.Active == true ? 'dashboard-feedback-preview-container dashboard-feedback-preview-container-active' : 'dashboard-feedback-preview-container'">
                            <div class="row">
                                <div class="col-sm-2">
                                    <img class="img-circle dashboard-feedback-post-author-avatar" ng-src="api/GetUserProfileImage?userId={{feedback.UserID}}" alt="{{ctrl.getArticleUserDisplayName(feedback)}}">
                                </div>
                                <div class="col-sm-7">
                                    <h4 class="dashboard-feedback-preview-author-name">{{ctrl.getArticleUserDisplayName(feedback)}}</h4>
                                    <h5 class="dashboard-feedback-preview-author-company-name">{{feedback.UserCompanyDisplayName}}</h5>
                                </div>
                                <div class="col-sm-3">
                                    <h5 class="dashboard-feedback-preview-date">{{ctrl.getFeedbackDisplayDate(feedback)}}</h5>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-10 col-sm-offset-2">
                                    <h4 class="dashboard-feedback-preview-target">{{feedback.Title}}</h4>
                                    <p class="dashboard-feedback-preview-body">{{feedback.Body}}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div ng-show="ctrl.selectedFeedback != null" class="row">
                    <div class="col-sm-12">
                        <h3 class="dashboard-feedback-target">{{ctrl.selectedFeedback.Title}}</h3>
                        <p class="dashboard-feedback-body">{{ctrl.selectedFeedback.Body}}</p>
                    </div>
                    <div class="col-sm-12">
                        <div class="row">
                            <div class="col-sm-12 dashboard-feedback-reply-col">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <textarea ng-model="ctrl.productFileFeedbackBody" class="dashboard-feedback-reply" placeholder="Feedback"></textarea>
                                    </div>
                                </div>
                                <div class="row" ng-show="ctrl.productFileFeedbackLinkUrl">
                                    <div class="col-sm-12">
                                        <i class="fa fa-link dashboard-post-comment-body-link-icon"></i><a href="http://{{ctrl.productFileFeedbackLinkUrl}}" target="_blank" class="dashboard-post-comment-body-link">http://{{ctrl.productFileFeedbackLinkUrl}}</a>
                                    </div>
                                </div>
                                <div class="row" ng-show="ctrl.productFileFeedbackImage">
                                    <div class="col-sm-12">
                                        <img class="image-responsive dashboard-post-image" ng-src="{{ctrl.getProductFileFeedbackImage()}}">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6 dashboard-feedback-reply-include-icons-col">
                                        <ul flow-init="ctrl.flowOptions" flow-files-submitted="ctrl.flowProductFileFeedbackImageSubmitted($files, $event, $flow)" class="list-inline dashboard-feedback-reply-include-icons">
                                            <li><i class="fa fa-link dashboard-feedback-reply-include-icon" ng-click="ctrl.toggleEditProductFileFeedbackLinkUrl()" uib-popover-template="'productFileFeedbackLinkUrlPopover.html'" popover-is-open="ctrl.editingProductFileFeedbackLinkUrl" popover-trigger="'none'" popover-append-to-body="true"></i></li>
                                            <li><i flow-btn class="fa fa-picture-o dashboard-feedback-reply-include-icon"></i></li>
                                            <li><i class="fa fa-lock dashboard-feedback-reply-include-icon"></i></li>
                                        </ul>
                                    </div>
                                    <div class="col-sm-2 dashboard-feedback-reply-visibility-col">
                                        <label class="dashboard-feedback-reply-visibility"><input type="radio" name="feedbackVisibility" class="dashboard-feedback-reply-visibility">Public</label>
                                    </div>
                                    <div class="col-sm-2 dashboard-feedback-reply-visibility-col">
                                        <label class="dashboard-feedback-reply-visibility"><input type="radio" name="feedbackVisibility" class="dashboard-feedback-reply-visibility">Private</label>
                                    </div>
                                    <div class="col-sm-2 dashboard-feedback-reply-button-col">
                                        <button ng-click="ctrl.postProductFileFeedback()" class="dashboard-feedback-reply" ng-disabled="ctrl.busy"><span ng-show="ctrl.busy" class="glyphicon glyphicon-refresh spinning"></span>Send</button>
                                    </div>
                                </div>
                                <div ng-repeat="feedback in ctrl.productFileFeedbackReplies" class="row">
                                    <div class="col-sm-12 dashboard-post-comment-col">
                                        <div class="row">
                                            <div class="com-sm-12">
                                                <div class="media">
                                                    <div class="media-left">
                                                        <a href="javascript:void(0)">
                                                            <img class="media-object img-circle dashboard-post-comment-author-avatar" ng-src="api/GetUserProfileImage?userId={{feedback.UserID}}" alt="Sarah Somebody">
                                                        </a>
                                                    </div>
                                                    <div class="media-body">
                                                        <h4 class="media-heading dashboard-post-comment-author-name">{{ctrl.getArticleUserDisplayName(feedback)}}</h4>
                                                        <p class="dashboard-post-comment-author-company">{{feedback.UserCompanyDisplayName}} {{ctrl.getFeedbackDisplayDate(feedback)}}</p>
                                                        <p class="dashboard-post-comment-body">{{feedback.Body}}</p>
                                                        <i ng-if="feedback.LinkUrl" class="fa fa-link dashboard-post-comment-body-link-icon"></i><a ng-if="feedback.LinkUrl" href="http://{{feedback.LinkUrl}}" target="_blank" class="dashboard-post-comment-body-link">http://{{feedback.LinkUrl}}</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div ng-show="feedback.HasImage" class="row">
                                            <div class="com-sm-12">
                                                <img class="image-responsive dashboard-post-image" ng-src="/api/GetProductFileFeedbackImage?productFileFeedbackId={{feedback.ID}}">
                                            </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
<script type="text/ng-template" id="productFileFeedbackLinkUrlPopover.html">
    <div class="container-fluid upload-file-details-popover" style="width: 400px;">
        <div class="row">
            <div class="col-sm-12">
                <input type="text" ng-model="ctrl.productFileFeedbackLinkUrl" class="upload-file-title" placeholder="Link">
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <button type="button" ng-click="ctrl.setProductFileFeedbackLinkUrl()" class="btn btn-default upload-file-details-save pull-right" ng-disabled="ctrl.busy"><span ng-show="ctrl.busy" class="glyphicon glyphicon-refresh spinning"></span>Save</button>
            </div>
        </div>
    </div>
</script>
