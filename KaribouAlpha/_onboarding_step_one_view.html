 <!--<meta name="viewport" content="width=device-width, initial-scale=1">-->
<style type="text/css">
    .dropdown-menu {
        width: 100% !important;
    }

    .alert-danger-new {
        color: #a94442;
        /*background-color: #f2dede;*/
        border-color: #ebccd1;
        float: left;
        line-height: 28px;
    }

    .tags {
    }

        .tags .tag {
            border-radius: 6px;
            background-color: #EFEFEF;
            border: 1px solid #DDD;
            padding: 5px;
            margin-right: 10px;
            float: left;
            margin-bottom: 8px;
            color: #909090;
        }

            .tags .tag:hover {
                color: #41a534;
                text-decoration: none;
            }

    input {
        margin-bottom: 0px !important;
    }

    .tagsbutton {
        background-color: #4CAF50; /* Green */
        padding: 3px 10px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
        background-color: white;
        color: black;
        border: 2px solid #4CAF50;
    }
</style>


<main>
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-12 text-right">
                <br>
                <span ng-click="ctrl.skipOnboarding()" class="onboarding-skip">Skip and jump straight in »</span>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-7 col-sm-offset-3 onboarding-col">
                <div class="row row-eq-height">
                    <div class="col-sm-3 onboarding-item-col">
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="onboarding-item-container ">
                                    <div class="onboarding-icon-container-sm">
                                        <span class="fa fa-star-o onboarding-icon-sm"></span>
                                    </div>

                                </div>
                            </div>
                            <div class="col-sm-6">
                                <img class="onboarding-arrow-sm" src="img/onboarding_arrow.png">
                            </div>
                            <div class="col-sm-12"><h4 class="onboarding-item-heading">Select Company</h4></div>
                        </div>

                    </div>
                    <div class="col-sm-3 onboarding-item-col">
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="onboarding-item-container ">
                                    <div class="onboarding-icon-container-sm-pending">
                                        <span class="fa fa-folder-open-o onboarding-icon-sm"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <img class="onboarding-arrow-sm" src="img/onboarding_arrow.png">
                            </div>
                            <div class="col-sm-12"><h4 class="onboarding-item-heading">Products</h4></div>
                        </div>

                    </div>
                    <div class="col-sm-3 onboarding-item-col">
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="onboarding-item-container ">
                                    <div class="onboarding-icon-container-sm-pending">
                                        <span class="fa fa-id-card-o onboarding-icon-sm"></span>
                                    </div>

                                </div>
                            </div>
                            <div class="col-sm-6">
                                <img class="onboarding-arrow-sm" src="img/onboarding_arrow.png">
                            </div>
                            <div class="col-sm-12"><h4 class="onboarding-item-heading">Personal Details</h4></div>
                        </div>

                    </div>
                    <div class="col-sm-3 onboarding-item-col">
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="onboarding-item-container ">
                                    <div class="onboarding-icon-container-sm-pending">
                                        <span class="fa fa-users onboarding-icon-sm"></span>
                                    </div>

                                </div>
                            </div>
                            <div class="col-sm-12"><h4 class="onboarding-item-heading">Connections</h4></div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="row pad_btm">
            <div class="col-sm-8 col-sm-offset-2 text-center green_circle_main">
                <div class="col-sm-4 green_circle_main_bg"><input type="radio" value="Search Company" ng-model="ctrl.companySelectionStatus.CompanySelectionType" ng-value="1" /><div class="circle_center"><img src="/img/gren_search.jpg" width="90" height="auto"><span class="green_circle">Search Company</span> </div></div>
                <div class="col-sm-4 green_circle_main_bg"><input type="radio" value="Add New Company" ng-model="ctrl.companySelectionStatus.CompanySelectionType" ng-value="2" /><div class="circle_center"><img src="/img/green_plus.jpg" width="90" height="auto"><span class="green_circle">Add New Company</span> </div></div>
                <div class="col-sm-4 green_circle_main_bg">
                    <input type="radio" value="I am Individual" ng-model="ctrl.companySelectionStatus.CompanySelectionType" ng-value="3" /><div class="circle_center"><img src="/img/green_hand.jpg" width="90" height="auto"><span class="green_circle">I'm an Individual</span> </div>
                </div>
            </div>
        </div>

        <div class="row" ng-show="ctrl.companySelectionStatus.CompanySelectionType == '1'">
            <div class="col-sm-8 col-sm-offset-2 text-center">
                <div class="search_box col-sm-6 col-xs-6">
                    <editable-select></editable-select>
                    <div class="input-group onboarding-connection-search">


                        <button type="button" class="btn onboarding-connection-search">
                            <span class="fa fa-search onboarding-connection-search-icon"></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="clearfix"></div>

        <div class="row" ng-show="ctrl.companySelectionStatus.CompanySelectionType == '1'" style="padding-top:10px;padding-bottom:10px;">
            <div class="col-sm-4 col-sm-offset-4 text-center">
                <button ng-click="ctrl.nextStep()" class="onboarding-start" ng-disabled="ctrl.busy"><span ng-show="ctrl.busy" class="glyphicon glyphicon-refresh spinning"></span>Next</button>
            </div>
        </div>

        <form name="myForm" novalidate>
            <div class="row" ng-show="ctrl.companySelectionStatus.CompanySelectionType == '2'">
                <div class="col-sm-8 col-sm-offset-2">
                    <div class="row">

                        <label class="col-sm-4 account-company-details mandatory">Company name<span ng-show="myForm.company.$error.required">*</span></label>

                        <div class="col-sm-5 account-company-details">
                            <input type="text" name="company" class="form-control account-company-details" autocomplete="off" ng-model="ctrl.company.DisplayName" placeholder="" onkeypress="handle(event)" required>


                        </div>

                    </div>
                    <div class="row">
                        <label class="col-sm-4 account-company-details-company-logo">Company logo</label>
                        <div class="col-sm-5 account-company-details" flow-init="ctrl.flowOptions" flow-files-submitted="ctrl.flowFilesSubmitted($files, $event, $flow)">
                            <div class="media">
                                <div class="media-left">
                                    <a flow-btn href="javascript:void(0)">
                                        <img class="media-object img-circle personal-profile-image" ng-src="{{ctrl.getCompanyProfileImage()}}" alt="{{ctrl.company.DisplayName}}">
                                    </a>
                                </div>
                                <div class="media-body">
                                    <h4 flow-btn style="cursor: pointer;" class="media-heading account-company-details-media-heading">Update&nbsp;&nbsp;<i class="fa fa-pencil"></i></h4>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-sm-4 account-company-details mandatory">Trading name<span ng-show="myForm.trading.$error.required">*</span></label>

                        <div class="col-sm-5 account-company-details">
                            <input type="text" name="trading" class="form-control account-company-details" autocomplete="off" ng-model="ctrl.company.TradingName" placeholder="" onkeypress="handle(event)" required>
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-sm-4 account-company-details mandatory">
                            Description
                            <span ng-show="myForm.description.$error.required">
                                *
                            </span>
                        </label>
                        <div class="col-sm-5 account-company-details ">
                            <textarea type="text" name="description" class="form-control account-company-details" ng-model="ctrl.company.Description" placeholder="" required></textarea>
                        </div>

                        <div class="countbox" ng-if="ctrl.company.Description.length>0">
                            Count:- {{ctrl.company.Description.length}}
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-sm-4 account-company-details mandatory">Phone<span ng-show="myForm.Phone.$error.required">*</span></label>

                        <div class="col-sm-5 account-company-details mandatory">
                            <input type="text" name="Phone" class="form-control account-company-details" autocomplete="off" ng-model="ctrl.company.PhoneNumber" placeholder="" ng-keypress="filterValue($event)" onkeypress="handle(event)" required maxlength="14">
                        </div>

                    </div>
                    <div class="row">
                        <label class="col-sm-4 account-company-details mandatory">Website<span ng-show="myForm.Website.$error.required">*</span></label>

                        <div class="col-sm-5 account-company-details mandatory">
                            <input type="url" name="Website" class="form-control account-company-details" autocomplete="off" ng-model="ctrl.company.WebsiteUrl" placeholder="" onkeypress="handle(event)" required>
                        </div>
                        <span class="error" style="color:red" ng-show="myForm.Website.$error.url">
                            Not valid url!
                        </span>

                    </div>
                    <div class="row">
                        <label class="col-sm-4 account-company-details mandatory">Sector<span ng-show="myForm.SelectSector.$error.required">*</span></label>
                        <div class="col-sm-5 account-company-details">
                            <div class="dropdown">
                                <input type="text" name="SelectSector" class="form-control account-company-details" placeholder="eg. Consulting, Insurance etc..." ng-model="ngSectorOptionSelected" ng-model-options="modelOptions" typeahead-min-length="1" typeahead-editable="true" typeahead-select-on-exact="true" uib-typeahead="sector.SectorName for sector in ctrl.companySectors | filter:$viewValue" onkeypress="handle(event)" required>
                            </div>
                        </div>
                        <!--<div class="col-sm-5 account-company-details">
                            <button ng-hide="AddSectorEnabled" onkeypress="handle(event)" class="onboarding-start marb-btm" ng-click="AddSectorEnable()">Add Sector</button>
                        </div>-->
                    </div>

                    

                    <div class="row">
                        <label class="col-sm-4 account-company-details mandatory">
                            Core services
                        </label>
                        <div class="col-md-offset-4 col-md-10">
                            <tag-manager tags="tags" ng-if="dataHasLoaded"> </tag-manager>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-5 col-sm-offset-4 text-center">
                            <button ng-click="myForm.$valid && ctrl.nextStep()" class="onboarding-start marb-15" ng-disabled="ctrl.busy" autofocus>
                                <span ng-show="ctrl.busy" class="glyphicon glyphicon-refresh spinning"></span>Next
                            </button>
                        </div>
                    </div>


                </div>

            </div>


        </form>


        <form name="PersonalProfile" novalidate>

            <div class="row" ng-show="ctrl.companySelectionStatus.CompanySelectionType == '3'" style="padding-top:10px;padding-bottom:10px;">
                <div class="col-sm-8 col-sm-offset-2">


                    <div class="row">
                        <label class="col-sm-4 account-company-details mandatory">Profile photo</label>
                        <div class="col-sm-5 account-company-details" flow-init="ctrl.flowOptions" flow-files-submitted="ctrl.flowFilesSubmitted($files, $event, $flow)">
                            <div class="media">
                                <div class="media-left">
                                    <a flow-btn href="javascript:void(0)">
                                        <img class="media-object img-circle personal-profile-image" ng-src="{{ctrl.getUserProfileImage()}}" alt="{{user.UserName}}">
                                    </a>
                                </div>
                                <div class="media-body">
                                    <h4 flow-btn style="cursor: pointer;" class="media-heading account-company-details-media-heading">Update&nbsp;&nbsp;<i class="fa fa-pencil"></i></h4>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-sm-4 account-company-details mandatory">First name<span ng-show="PersonalProfile.FirstName.$error.required">*</span></label>
                        <div class="col-sm-5 account-company-details">
                            <input name="FirstName" type="text" class="form-control account-company-details" ng-model="user.FirstName" placeholder="" required>
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-sm-4 account-company-details mandatory">Surname <span ng-show="PersonalProfile.Surname.$error.required">*</span> </label>
                        <div class="col-sm-5 account-personal-details">
                            <input name="Surname" type="text" class="form-control account-company-details" ng-model="user.LastName" placeholder="" required>
                        </div>
                    </div>
                    <!--<div class="row">
            <label class="col-sm-3 account-personal-details">Email</label>
            <div class="col-sm-5 account-personal-details">
                <input type="text" class="form-control account-personal-details" ng-model="ctrl.user.Email" placeholder="">
            </div>
        </div>-->
                    <div class="row">
                        <label class="col-sm-4 account-company-details mandatory">Mobile <span ng-show="PersonalProfile.PhoneNumber.$error.required">*</span> </label>
                        <div class="col-sm-5 account-company-details">
                            <input name="PhoneNumber" type="text" ng-keypress="filterValue($event)" autocomplete="off" class="form-control account-company-details" ng-model="user.PhoneNumber" placeholder="" required>
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-sm-4 account-company-details">Country<span ng-show="PersonalProfile.Country.$error.required">*</span></label>
                        <div class="col-sm-5 account-company-details">
                            <div class="dropdown" >
                                <button class="btn btn-default dropdown-toggle account-company-details-sector-selection" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    {{user.Country}}
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenu1" name="Country">
                                    <li ng-repeat="country in ctrl.countries"><a href="javascript:void(0)" ng-click="setUserCountry(country.name)">{{country.name}}</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-sm-4 account-company-details mandatory">Town <span ng-show="PersonalProfile.Town.$error.required">*</span></label>
                        <div class="col-sm-5 account-company-details">
                            <input name="Town" type="text" class="form-control account-company-details" ng-model="user.Town" placeholder="" required>
                        </div>
                    </div>
                    <div class="col-sm-4 col-sm-offset-4 text-center">
                        <button ng-click="PersonalProfile.$valid && ctrl.nextStep()" class="onboarding-start" ng-disabled="ctrl.busy"><span ng-show="ctrl.busy" class="glyphicon glyphicon-refresh spinning"></span>Next</button>
                    </div>
                </div>
                <!--</form>-->
            </div>
        </form>
</main>

<script>
    function handle(e) {
        debugger
        if(e.keyCode === 13){
            e.preventDefault(); // Ensure it is only this code that rusn
            return false;
                    }
    }
    
</script>
<!--<script type="text/ng-template" id="onboardingSearchResultsTypeaheadTemplate2.html">

    <div class="container-fluid onboarding-search-results-container" ng-style="{top: position().top + 'px', left: position().left + 'px'}" ng-show="isOpen() && !moveInProgress">
        <div ng-show="(matches).length" class="row nav-search-results-header-row">
            <div class="col-sm-12">
                <span class="nav-search-results-companies">Companies</span>
                &nbsp;
                <span style="display:none;" ui-sref="search({query: query, show: 'companies'})" class="nav-search-results-products-view-all">view all</span>
            </div>
        </div>
        <div ng-repeat="match in matches track by $index" class="row uib-typeahead-match nav-search-results-row" >
            <div class="col-sm-3">
                <img class="img-circle nav-search-results-logo" ng-src="api/GetCompanyLogo?companyId={{match.model.ID}}" />
            </div>
            <div class="col-sm-9" ng-controller="onboardingStepOneController">
                <span class="nav-search-results-company-name">{{match.model.DisplayName}}</span>
                <br />
                <span class="nav-search-results-company-products">{{match.model.ProductCount}} products</span>
            </div>
            <button ng-click='SendId(match.model.DisplayName)'>{{match.model.DisplayName}}></button>
        </div>
    </div>
</script>-->
<script type="text/ng-template" id="onboardingSearchResultsTypeaheadTemplate2.html">
    <div class="container-fluid onboarding-search-results-container">
        <div class="main_search">

            <input name="editable-select"
                   type="text"
                   class="form-control dropdown-toggle editable-select"
                   ng-disabled="isDisabled"
                   ng-model="CompanyModel.Name" ng-change="search(CompanyModel.Name)">

            <div ng-repeat="option in CompanyData" class="uib-typeahead-match nav-search-results-row" ng-show="CompanyShow">
                <div class="col-sm-3">
                    <img class="img-circle nav-search-results-logo" ng-src="api/GetCompanyLogo?companyId={{option.ID}}" />
                </div>
                <div class="col-sm-9" ng-controller="onboardingStepOneController" ng-click='onSelect(option)'>
                    <div class="main_search_content">
                        <span class="nav-search-results-company-name">{{option.DisplayName}}</span>

                        <span class="nav-search-results-company-products">{{option.ProductCount}} products</span>


                    </div>
                </div>
            </div>
        </div>



    </div>
</script>

